<wxs src="./../../wxs/time.wxs" module="timeUtils"></wxs>
<view class="channel flex-between" wx:if="{{channel}}">
  <view class="channel-info">
    <view class="channel-name">{{channel.name}}</view>
    <view class="channel-attrs flex-start not-importent">
      <view class="channel-attr" wx:for="{{channel.attrs||channel.channelTemplate.attrs}}" wx:key="name">{{item.name}}
      </view>
    </view>
    <view class="channel-template-name flex-start">
      <navigator class="not-importent" url="/pages/channel/template?templateId={{channel.channelTemplate._id}}"><text
          class="ref-content">@{{channel.channelTemplate.name}}</text></navigator>
    </view>
  </view>
  <view class="follow-btn">
    <button bindtap="removeUserChannel" wx:if="{{userChannel}}" size="mini" type="default">已订阅</button>
    <button bindtap="addUserChannel" type="primary" size="mini" wx:else>订阅</button>
  </view>
</view>

<view class="notify flex-between" wx:if="{{userChannel}}">
  <view class="not-importent">
    通知
  </view>
  <view>
    <switch checked="{{userChannel.notify}}" bindchange="switchNotify" />
  </view>
</view>

<view class="channel-datas" wx:if="{{channel}}">
  <view class="channel-datas-title not-importent">
    最近变化
  </view>
  <view wx:for="{{channelDatas}}" wx:key="_id" class="flex-start channel-data">
    <view class="channle-data-index not-importent">
      <mp-icon icon="time" size="20" color="gray" type="field"></mp-icon>
    </view>
    <view class="channel-data-item">
      <view class="channel-data-time not-importent">{{timeUtils.formatPass(item.createTime)}}</view>
      <view class="channel-attr-items">
        <view class="channel-attr-item" wx:for="{{channel.attrs||channel.channelTemplate.attrs}}" wx:key="name"
          wx:for-item="attr">
          <text class="not-importent">{{attr.name}}：</text>
          <text class="attr-value">{{item.data[attr.name]}}</text>
        </view>
      </view>
    </view>
  </view>
</view>